import{q as Y,a2 as q,m as M,n as $,j,x,S as p,t as d,I as k,a3 as B}from"./index.9f6f9a88.js";import{d as F}from"./QBtn.0a5a5c25.js";import{b as I,a as _,h as K}from"./scroll.1c5c5e01.js";function Q(o,e,r){let t;function i(){t!==void 0&&(q.remove(t),t=void 0)}return Y(()=>{o.value===!0&&i()}),{removeFromHistory:i,addToHistory(){t={condition:()=>r.value===!0,handler:e},q.add(t)}}}const Z={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},ee=["beforeShow","show","beforeHide","hide"];function oe({showing:o,canShow:e,hideOnRouteChange:r,handleShow:t,handleHide:i,processOnMount:v}){const s=j(),{props:n,emit:a,proxy:V}=s;let u;function X(l){o.value===!0?y(l):L(l)}function L(l){if(n.disable===!0||l!==void 0&&l.qAnchorHandled===!0||e!==void 0&&e(l)!==!0)return;const f=n["onUpdate:modelValue"]!==void 0;f===!0&&(a("update:modelValue",!0),u=l,x(()=>{u===l&&(u=void 0)})),(n.modelValue===null||f===!1)&&E(l)}function E(l){o.value!==!0&&(o.value=!0,a("beforeShow",l),t!==void 0?t(l):a("show",l))}function y(l){if(n.disable===!0)return;const f=n["onUpdate:modelValue"]!==void 0;f===!0&&(a("update:modelValue",!1),u=l,x(()=>{u===l&&(u=void 0)})),(n.modelValue===null||f===!1)&&H(l)}function H(l){o.value!==!1&&(o.value=!1,a("beforeHide",l),i!==void 0?i(l):a("hide",l))}function S(l){n.disable===!0&&l===!0?n["onUpdate:modelValue"]!==void 0&&a("update:modelValue",!1):l===!0!==o.value&&(l===!0?E:H)(u)}M(()=>n.modelValue,S),r!==void 0&&F(s)===!0&&M(()=>V.$route.fullPath,()=>{r.value===!0&&o.value===!0&&y()}),v===!0&&$(()=>{S(n.modelValue)});const P={show:L,hide:y,toggle:X};return Object.assign(V,P),P}let m=0,b,g,w,T=!1,C,A,z,c=null;function O(o){R(o)&&k(o)}function R(o){if(o.target===document.body||o.target.classList.contains("q-layout__backdrop"))return!0;const e=B(o),r=o.shiftKey&&!o.deltaX,t=!r&&Math.abs(o.deltaX)<=Math.abs(o.deltaY),i=r||t?o.deltaY:o.deltaX;for(let v=0;v<e.length;v++){const s=e[v];if(K(s,t))return t?i<0&&s.scrollTop===0?!0:i>0&&s.scrollTop+s.clientHeight===s.scrollHeight:i<0&&s.scrollLeft===0?!0:i>0&&s.scrollLeft+s.clientWidth===s.scrollWidth}return!0}function U(o){o.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function h(o){T!==!0&&(T=!0,requestAnimationFrame(()=>{T=!1;const{height:e}=o.target,{clientHeight:r,scrollTop:t}=document.scrollingElement;(w===void 0||e!==window.innerHeight)&&(w=r-e,document.scrollingElement.scrollTop=t),t>w&&(document.scrollingElement.scrollTop-=Math.ceil((t-w)/8))}))}function W(o){const e=document.body,r=window.visualViewport!==void 0;if(o==="add"){const{overflowY:t,overflowX:i}=window.getComputedStyle(e);b=I(window),g=_(window),C=e.style.left,A=e.style.top,z=window.location.href,e.style.left=`-${b}px`,e.style.top=`-${g}px`,i!=="hidden"&&(i==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),t!=="hidden"&&(t==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,p.is.ios===!0&&(r===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",h,d.passiveCapture),window.visualViewport.addEventListener("scroll",h,d.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",U,d.passiveCapture))}p.is.desktop===!0&&p.is.mac===!0&&window[`${o}EventListener`]("wheel",O,d.notPassive),o==="remove"&&(p.is.ios===!0&&(r===!0?(window.visualViewport.removeEventListener("resize",h,d.passiveCapture),window.visualViewport.removeEventListener("scroll",h,d.passiveCapture)):window.removeEventListener("scroll",U,d.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=C,e.style.top=A,window.location.href===z&&window.scrollTo(b,g),w=void 0)}function D(o){let e="add";if(o===!0){if(m++,c!==null){clearTimeout(c),c=null;return}if(m>1)return}else{if(m===0||(m--,m>0))return;if(e="remove",p.is.ios===!0&&p.is.nativeMobile===!0){c!==null&&clearTimeout(c),c=setTimeout(()=>{W(e),c=null},100);return}}W(e)}function te(){let o;return{preventBodyScroll(e){e!==o&&(o!==void 0||e===!0)&&(o=e,D(e))}}}function le(o){return o.charAt(0).toUpperCase()+o.slice(1)}function re(o,e,r){return r<=e?e:Math.min(r,Math.max(e,o))}function ie(o,e,r){if(r<=e)return e;const t=r-e+1;let i=e+(o-e)%t;return i<e&&(i=t+i),i===0?0:i}function se(o,e=2,r="0"){if(o==null)return o;const t=""+o;return t.length>=e?t:new Array(e-t.length+1).join(r)+t}export{ee as a,oe as b,Q as c,re as d,te as e,le as f,ie as n,se as p,Z as u};
